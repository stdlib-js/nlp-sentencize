{"version":3,"file":"index.mjs","sources":["../lib/main.js"],"sourcesContent":["/**\n* @license Apache-2.0\n*\n* Copyright (c) 2023 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nimport { isPrimitive as isString } from '@stdlib/assert-is-string';\nimport tokenize from '@stdlib/nlp-tokenize';\nimport trim from '@stdlib/string-base-trim';\n\n\n// VARIABLES //\n\nvar RE_LOWERCASE = /^[a-z]+$/;\nvar RE_CAPITALIZED = /^[A-Z][a-z]{0,4}$/;\nvar RE_CAPITALIZED_PERIOD = /^([A-Z]\\.)*[A-Z]$/;\nvar RE_NUMBER = /^[0-9]$/;\nvar RE_PREFIXES = /^[{[(<:;\"'”`]/;\nvar RE_SUFFIXES = /[})\\]>:;\"'”`]$/;\nvar RE_QUOTES = /^[\"'`]$/;\n\n\n// FUNCTIONS //\n\n/**\n* Checks whether the token at a specified index is an end-of-sentence token.\n*\n* ## Notes\n*\n* -   The function uses a set of heuristics to determine whether a token is an end-of-sentence token.\n* -   Periods (`.`), exclamation points (`!`), and question marks (`?`). are treated as possible end-of-sentence tokens.\n* -   The function expects that the input array of tokens has been tokenized using the `@stdlib/nlp/tokenize` function, which tokenizes a string into an array of tokens and handles titles (`Dr.`, etc.), abbreviations such as `e.g.`, and the like, keeping them as single tokens. For example, the string `Dr. Smith is a professor at MIT.` is tokenized as `['Dr.', 'Smith', 'is', 'a', 'professor', 'at', 'MIT', '.']`. This function henceforth only considers standalone characters as possible end-of-sentence tokens, and does not consider them as end-of-sentence tokens if they are part of a larger token.\n*\n* @private\n* @param {StringArray} tokens - array of tokens\n* @param {NonNegativeInteger} i - index\n* @returns {boolean} boolean indicating whether the token at a specified index is an end-of-sentence token\n*/\nfunction isEndOfSentence( tokens, i ) {\n\tvar nextToken;\n\tvar token;\n\tvar im1 = i - 1;\n\tvar ip1 = i + 1;\n\n\ttoken = tokens[ i ];\n\n\t// Handle quoted text with punctuation...\n\tif (\n\t\tRE_QUOTES.test( token ) &&\n\t\ti > 0 &&\n\t\t( tokens[ im1 ] === '.' || tokens[ im1 ] === '!' || tokens[ im1 ] === '?' )\n\t) {\n\t\t// Look ahead to see if sentence continues:\n\t\tip1 = i + 1;\n\t\tif ( ip1 < tokens.length ) {\n\t\t\t// Skip spaces...\n\t\t\twhile ( ip1 < tokens.length && tokens[ ip1 ] === ' ' ) {\n\t\t\t\tip1 += 1;\n\t\t\t}\n\t\t\t// If next non-space token is lowercase, we assume the sentence continues:\n\t\t\tif ( ip1 < tokens.length ) {\n\t\t\t\tnextToken = tokens[ ip1 ];\n\t\t\t\tif ( RE_LOWERCASE.test( nextToken ) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\t// Regular sentence ending punctuation...\n\tif (\n\t\ttoken === '.' &&\n\t\t!RE_CAPITALIZED.test( tokens[ im1 ] ) && // for other short abbreviations and bullet points\n\t\t!RE_CAPITALIZED_PERIOD.test( tokens[ im1 ] ) && // acronyms of the form A.B.C.\n\t\t!RE_NUMBER.test( tokens[ im1 ] ) && // numbered list items\n\t\t!RE_PREFIXES.test( tokens[ im1 ] ) &&\n\t\t!RE_SUFFIXES.test( tokens[ ip1 ] )\n\t) {\n\t\treturn true;\n\t}\n\tif (\n\t\t( token === '!' || token === '?' ) &&\n\t\t!RE_PREFIXES.test( tokens[ im1 ] ) &&\n\t\t!RE_SUFFIXES.test( tokens[ ip1 ] ) &&\n\t\t( tokens[ ip1 ] !== '!' && tokens[ ip1 ] !== '?' )\n\t) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n\n// MAIN //\n\n/**\n* Splits a string into an array of sentences.\n*\n* @param {string} str - input string\n* @throws {TypeError} must provide a string\n* @returns {StringArray} array of sentences\n*\n* @example\n* var str = 'Hello World! How are you?';\n* var out = sentencize( str );\n* // returns [ 'Hello World!', 'How are you?' ]\n*\n* @example\n* var str = '';\n* var out = sentencize( str );\n* // returns []\n*\n* @example\n* var str = 'Hello Mrs. Maple, could you call me back?';\n* var out = sentencize( str );\n* // returns [ 'Hello Mrs. Maple, could you call me back?' ]\n*/\nfunction sentencize( str ) {\n\tvar current;\n\tvar tokens;\n\tvar out;\n\tvar i;\n\n\tif ( !isString( str ) ) {\n\t\tthrow new TypeError( 'invalid argument. Must provide a string. Value: `' + str + '`.' );\n\t}\n\ttokens = tokenize( str, true );\n\tcurrent = '';\n\tout = [];\n\tfor ( i = 0; i < tokens.length; i++ ) {\n\t\tcurrent += tokens[ i ];\n\t\tif ( isEndOfSentence( tokens, i ) ) {\n\t\t\tout.push( trim( current ) );\n\t\t\tcurrent = '';\n\t\t}\n\t}\n\tif ( current !== '' ) {\n\t\tout.push( trim( current ) );\n\t}\n\treturn out;\n}\n\n\n// EXPORTS //\n\nexport default sentencize;\n"],"names":["RE_LOWERCASE","RE_CAPITALIZED","RE_CAPITALIZED_PERIOD","RE_NUMBER","RE_PREFIXES","RE_SUFFIXES","RE_QUOTES","isEndOfSentence","tokens","i","nextToken","token","im1","ip1","test","length","sentencize","str","current","out","isString","TypeError","tokenize","push","trim"],"mappings":";;4RA6BA,IAAIA,EAAe,WACfC,EAAiB,oBACjBC,EAAwB,oBACxBC,EAAY,UACZC,EAAc,gBACdC,EAAc,iBACdC,EAAY,UAmBhB,SAASC,EAAiBC,EAAQC,GACjC,IAAIC,EACAC,EACAC,EAAMH,EAAI,EACVI,EAAMJ,EAAI,EAKd,GAHAE,EAAQH,EAAQC,GAIfH,EAAUQ,KAAMH,IAChBF,EAAI,IACgB,MAAlBD,EAAQI,IAAmC,MAAlBJ,EAAQI,IAAmC,MAAlBJ,EAAQI,IAC3D,CAGD,IADAC,EAAMJ,EAAI,GACCD,EAAOO,OAAS,CAE1B,KAAQF,EAAML,EAAOO,QAA4B,MAAlBP,EAAQK,IACtCA,GAAO,EAGR,GAAKA,EAAML,EAAOO,SACjBL,EAAYF,EAAQK,GACfb,EAAac,KAAMJ,IACvB,OAAO,CAGT,CACD,OAAO,CACP,CAGD,QACW,MAAVC,GACCV,EAAea,KAAMN,EAAQI,KAC7BV,EAAsBY,KAAMN,EAAQI,KACpCT,EAAUW,KAAMN,EAAQI,KACxBR,EAAYU,KAAMN,EAAQI,KAC1BP,EAAYS,KAAMN,EAAQK,QAKf,MAAVF,GAA2B,MAAVA,GAClBP,EAAYU,KAAMN,EAAQI,KAC1BP,EAAYS,KAAMN,EAAQK,KACP,MAAlBL,EAAQK,IAAmC,MAAlBL,EAAQK,GAKrC,CA2BA,SAASG,EAAYC,GACpB,IAAIC,EACAV,EACAW,EACAV,EAEJ,IAAMW,EAAUH,GACf,MAAM,IAAII,UAAW,oDAAsDJ,EAAM,MAKlF,IAHAT,EAASc,EAAUL,GAAK,GACxBC,EAAU,GACVC,EAAM,GACAV,EAAI,EAAGA,EAAID,EAAOO,OAAQN,IAC/BS,GAAWV,EAAQC,GACdF,EAAiBC,EAAQC,KAC7BU,EAAII,KAAMC,EAAMN,IAChBA,EAAU,IAMZ,MAHiB,KAAZA,GACJC,EAAII,KAAMC,EAAMN,IAEVC,CACR"}